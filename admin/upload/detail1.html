<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student List</title>
    <link rel="stylesheet" href="sum1.css">
    <link rel="icon" href="data:,">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <header>
        <img src="head.png" alt="" style="width: 100%; height: 20vh;">
    </header>
    <nav style="width: 100%;background-color:#031f3c;height:6vh">
        <!-- <h5 style="color: white;">Admin</h3> -->
        <a href="../upload/detail1.html" style="text-decoration:none;color:white">Students</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="../upload/index1.html" style="text-decoration:none;color:white">Upload</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </nav>
    </nav>
<div class="container-fluid mt-4">
   
    <div style="margin-top: 50px;"></div>
    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-airplane" viewBox="0 0 16 16">
        <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849m.894.448C7.111 2.02 7 2.569 7 3v4a.5.5 0 0 1-.276.447l-5.448 2.724a.5.5 0 0 0-.276.447v.792l5.418-.903a.5.5 0 0 1 .575.41l.5 3a.5.5 0 0 1-.14.437L6.708 15h2.586l-.647-.646a.5.5 0 0 1-.14-.436l.5-3a.5.5 0 0 1 .576-.411L15 11.41v-.792a.5.5 0 0 0-.276-.447L9.276 7.447A.5.5 0 0 1 9 7V3c0-.432-.11-.979-.322-1.401C8.458 1.159 8.213 1 8 1s-.458.158-.678.599"/>
      </svg> -->
    <h2 class="text-center" style="color: #031f3c;">Student List</h2>
    <div style="margin-top: 50px;"></div>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Reg No</th>
                    <th>Name</th>
                    <th>Department</th>
                    <th>CGPA</th>
                </tr>
            </thead>
            <tbody id="studentList"></tbody>
        </table>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", async function () {
    const studentList = document.getElementById("studentList");

    try {
        const response = await fetch("http://127.0.0.1:3000/api/students");
        const students = await response.json();

        students.forEach(student => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${student.regNo}</td>
                <td>${student.name}</td>
                <td>${student.department}</td>
                <td>${student.cgpa}</td>
            `;
            row.style.cursor = "pointer";

            row.addEventListener("click", () => {
                window.location.href = `detail.html?regNo=${student.regNo}`;
            });

            studentList.appendChild(row);
        });
    } catch (error) {
        console.error("Error fetching students:", error);
    }
});
</script>

</body>
</html>